import{r as e,c as a,f as l,ag as t,y as s,G as i,H as n,A as o,P as u,L as c,V as d,z as v,M as r,u as m,O as p,a4 as g,K as y,k as f,S as b,D as _,C as h,aB as k,T as w,am as x}from"./vue-vendor-d5869c7e.js";import{g as C,C as I,E as A,D as E,v as z,r as D,F as S,x as T}from"./element-plus-34fa3ae3.js";import{a as U}from"./utils-9074b6ef.js";import{_ as V,u as N}from"./index-294d5dea.js";import{C as L,M as $,S as M}from"./SubmissionDetailDialog-c72167b8.js";const B={class:"dialog-footer"},R=V({__name:"SubmissionDialog",props:{visible:{type:Boolean,default:!1}},emits:["update:visible","submit"],setup(v,{emit:r}){const m=v,p=r,g=e(),y=e(!1),f=e({title:"",content:"",category:""}),b={title:[{required:!0,message:"è¯·è¾“å…¥ä½œå“æ ‡é¢˜",trigger:"blur"},{min:2,max:200,message:"æ ‡é¢˜é•¿åº¦åº”åœ¨2-200å­—ç¬¦ä¹‹é—´",trigger:"blur"}],content:[{required:!0,message:"è¯·è¾“å…¥ä½œå“å†…å®¹",trigger:"blur"},{min:10,max:2e3,message:"å†…å®¹é•¿åº¦åº”åœ¨10-2000å­—ç¬¦ä¹‹é—´",trigger:"blur"}],category:[{required:!0,message:"è¯·é€‰æ‹©åˆ†ç±»",trigger:"change"}]},_=a({get:()=>m.visible,set:e=>p("update:visible",e)});l((()=>m.visible),(e=>{e&&h()}));const h=()=>{f.value={title:"",content:"",category:""},g.value&&g.value.clearValidate()},k=()=>{_.value=!1},w=async()=>{try{if(!(await g.value.validate()))return;y.value=!0,p("submit",{...f.value})}catch(e){}finally{y.value=!1}};return(e,a)=>{const l=t("el-input"),v=t("el-form-item"),r=t("el-option"),m=t("el-select"),p=t("el-form"),h=t("el-button"),x=t("el-dialog");return s(),i(x,{modelValue:_.value,"onUpdate:modelValue":a[4]||(a[4]=e=>_.value=e),title:"æäº¤æ¯”èµ›ä½œå“",width:"70%","before-close":k},{footer:n((()=>[o("div",B,[u(h,{onClick:k},{default:n((()=>a[6]||(a[6]=[c("å–æ¶ˆ")]))),_:1,__:[6]}),u(h,{type:"primary",onClick:w,loading:y.value},{default:n((()=>a[7]||(a[7]=[c(" æäº¤ä½œå“ ")]))),_:1,__:[7]},8,["loading"])])])),default:n((()=>[u(L,{direction:"vertical",size:"thin",theme:"primary","auto-hide":!0,class:"dialog-content"},{default:n((()=>[u(p,{ref_key:"formRef",ref:g,model:f.value,rules:b,"label-width":"100px",onSubmit:a[3]||(a[3]=d((()=>{}),["prevent"]))},{default:n((()=>[u(v,{label:"ä½œå“æ ‡é¢˜",prop:"title"},{default:n((()=>[u(l,{modelValue:f.value.title,"onUpdate:modelValue":a[0]||(a[0]=e=>f.value.title=e),placeholder:"è¯·è¾“å…¥ä½œå“æ ‡é¢˜",maxlength:"200","show-word-limit":""},null,8,["modelValue"])])),_:1}),u(v,{label:"åˆ†ç±»",prop:"category"},{default:n((()=>[u(m,{modelValue:f.value.category,"onUpdate:modelValue":a[1]||(a[1]=e=>f.value.category=e),placeholder:"è¯·é€‰æ‹©åˆ†ç±»",style:{width:"100%"}},{default:n((()=>[u(r,{label:"æ–‡æ¡ˆå†™ä½œ",value:"æ–‡æ¡ˆå†™ä½œ"}),u(r,{label:"ç¼–ç¨‹åŠ©æ‰‹",value:"ç¼–ç¨‹åŠ©æ‰‹"}),u(r,{label:"åˆ›æ„è®¾è®¡",value:"åˆ›æ„è®¾è®¡"}),u(r,{label:"å­¦ä¹ æ•™è‚²",value:"å­¦ä¹ æ•™è‚²"}),u(r,{label:"å•†ä¸šåˆ†æ",value:"å•†ä¸šåˆ†æ"}),u(r,{label:"ç”Ÿæ´»åŠ©æ‰‹",value:"ç”Ÿæ´»åŠ©æ‰‹"}),u(r,{label:"å¨±ä¹æ¸¸æˆ",value:"å¨±ä¹æ¸¸æˆ"}),u(r,{label:"ç§‘ç ”å­¦æœ¯",value:"ç§‘ç ”å­¦æœ¯"}),u(r,{label:"å…¶ä»–",value:"å…¶ä»–"})])),_:1},8,["modelValue"])])),_:1}),u(v,{label:"ä½œå“å†…å®¹",prop:"content"},{default:n((()=>[u(l,{modelValue:f.value.content,"onUpdate:modelValue":a[2]||(a[2]=e=>f.value.content=e),type:"textarea",rows:8,placeholder:"è¯·è¯¦ç»†æè¿°æ‚¨çš„æç¤ºè¯å†…å®¹...",maxlength:"2000","show-word-limit":""},null,8,["modelValue"])])),_:1}),u(v,null,{default:n((()=>a[5]||(a[5]=[o("div",{class:"tips"},[o("h4",null,"ğŸ“ æäº¤é¡»çŸ¥ï¼š"),o("ul",null,[o("li",null,"æ¯ä¸ªæ¯”èµ›å‘¨æœŸåªèƒ½æäº¤ä¸€ä¸ªä½œå“"),o("li",null,"ä½œå“éœ€è¦ç»è¿‡ç®¡ç†å‘˜å®¡æ ¸æ‰ä¼šå…¬å¼€å±•ç¤º"),o("li",null,"å®¡æ ¸é€šè¿‡åä¼šè·å¾—AIç”Ÿæˆçš„è¯„è¯­"),o("li",null,"è¯·ç¡®ä¿å†…å®¹åŸåˆ›ä¸”ç¬¦åˆç¤¾åŒºè§„èŒƒ")])],-1)]))),_:1,__:[5]})])),_:1},8,["model"])])),_:1})])),_:1},8,["modelValue"])}}},[["__scopeId","data-v-27e52dc1"]]),j={key:0,class:"competition-detail"},P={class:"competition-info"},O={class:"info-item"},H={class:"info-item"},X={class:"info-item"},q={class:"info-item"},G={class:"submissions-section"},W={key:0,class:"loading-section"},F={key:1,class:"empty-section"},K={key:2,class:"submissions-grid"},J=["onClick"],Q={class:"submission-header"},Y={class:"author"},Z={class:"content"},ee={key:0,class:"ai-review"},ae={class:"ai-review-header"},le={class:"submission-meta"},te={class:"created-time"},se={key:0,class:"promoted-tag"},ie=V({__name:"CompetitionDetailDialog",props:{visible:{type:Boolean,default:!1},competitionId:{type:Number,default:null}},emits:["update:visible"],setup(d,{emit:f}){const b=d,_=f,h=e(null),k=e([]),w=e(!1),x=e(!1),E=e(null),z=a({get:()=>b.visible,set(e){_("update:visible",e)}});l((()=>b.competitionId),(e=>{e&&b.visible&&D()})),l((()=>b.visible),(e=>{e&&b.competitionId&&D()}));const D=async()=>{if(b.competitionId){w.value=!0;try{const e=await U.get(`/api/competition/${b.competitionId}`);h.value=e.data.competition,k.value=h.value.submissions||[]}catch(e){A.error("åŠ è½½æ¯”èµ›è¯¦æƒ…å¤±è´¥")}finally{w.value=!1}}},S=e=>e?new Date(e).toLocaleString("zh-CN"):"";return(e,a)=>{const l=t("el-tag"),d=t("el-icon"),f=t("el-empty"),b=t("el-dialog");return s(),i(b,{modelValue:z.value,"onUpdate:modelValue":a[1]||(a[1]=e=>z.value=e),title:h.value?.title||"æ¯”èµ›è¯¦æƒ…",width:"90%","max-width":"1200px","destroy-on-close":""},{default:n((()=>[u(L,{direction:"vertical",size:"thin",theme:"primary","auto-hide":!0,class:"dialog-content"},{default:n((()=>[h.value?(s(),v("div",j,[o("div",P,[o("div",O,[a[2]||(a[2]=o("span",{class:"label"},"æ¯”èµ›æè¿°ï¼š",-1)),o("span",null,r(h.value.description),1)]),o("div",H,[a[3]||(a[3]=o("span",{class:"label"},"æ¯”èµ›æ—¶é—´ï¼š",-1)),o("span",null,r(S(h.value.start_time))+" è‡³ "+r(S(h.value.end_time)),1)]),o("div",X,[a[4]||(a[4]=o("span",{class:"label"},"æ¯”èµ›çŠ¶æ€ï¼š",-1)),u(l,{type:"active"===h.value.status?"success":"info",size:"small",class:"status-tag"},{default:n((()=>[c(r("active"===h.value.status?"è¿›è¡Œä¸­":"å·²ç»“æŸ"),1)])),_:1},8,["type"])]),o("div",q,[a[5]||(a[5]=o("span",{class:"label"},"å‚èµ›ä½œå“æ•°ï¼š",-1)),o("span",null,r(h.value.submissions_count)+" ä¸ª",1)])]),o("div",G,[a[9]||(a[9]=o("h3",null,"å‚èµ›ä½œå“",-1)),w.value?(s(),v("div",W,[u(d,{class:"is-loading"},{default:n((()=>[u(m(C))])),_:1}),a[6]||(a[6]=o("span",null,"åŠ è½½ä¸­...",-1))])):0===k.value.length?(s(),v("div",F,[u(f,{description:"æš‚æ— å‚èµ›ä½œå“"})])):(s(),v("div",K,[(s(!0),v(p,null,g(k.value,(e=>{return s(),v("div",{key:e.id,class:"submission-card",onClick:a=>(e=>{E.value=e,x.value=!0})(e)},[o("div",Q,[o("h4",null,r(e.title),1),u(l,{size:"small"},{default:n((()=>[c(r(e.category),1)])),_:2},1024)]),o("p",Y,"ä½œè€…ï¼š"+r(e.author),1),o("p",Z,r((t=e.content,i=150,t?t.length<=i?t:t.substring(0,i)+"...":"")),1),e.ai_review?(s(),v("div",ee,[o("div",ae,[u(d,null,{default:n((()=>[u(m(I))])),_:1}),a[7]||(a[7]=o("span",null,"AIè¯„è¯­",-1))]),u($,{content:e.ai_review},null,8,["content"])])):y("",!0),o("div",le,[o("span",te,r(S(e.created_at)),1),e.promoted_to_prompt?(s(),v("span",se,[u(l,{type:"success",size:"small"},{default:n((()=>a[8]||(a[8]=[c("å·²æ¨å¹¿")]))),_:1,__:[8]})])):y("",!0)])],8,J);var t,i})),128))]))])])):y("",!0)])),_:1}),u(M,{visible:x.value,"onUpdate:visible":a[0]||(a[0]=e=>x.value=e),submission:E.value},null,8,["visible","submission"])])),_:1},8,["modelValue","title"])}}},[["__scopeId","data-v-3bcc0e9e"]]),ne={class:"snake-game"},oe={class:"game-header"},ue={class:"game-info"},ce={class:"score"},de={class:"high-score"},ve={class:"game-container"},re={key:0,class:"game-overlay"},me={class:"game-message"},pe={key:0,class:"start-message"},ge={key:1,class:"game-over-message"},ye={key:0,class:"new-record"},fe={class:"game-controls"},be={class:"control-buttons"},_e={class:"middle-row"},he=V({__name:"SnakeGame",setup(l){const i=e(12),d=e([{x:5,y:5}]),m=e({x:8,y:8}),k=e({x:1,y:0}),w=e({x:1,y:0}),x=e(!1),C=e(!1),I=e(0),A=e(parseInt(localStorage.getItem("snakeHighScore")||"0")),E=e(!1),z=e(null),D=a((()=>{const e=Array(i.value*i.value).fill("empty");d.value.forEach(((a,l)=>{const t=a.y*i.value+a.x;t>=0&&t<e.length&&(e[t]=0===l?"head":"body")}));const a=m.value.y*i.value+m.value.x;return a>=0&&a<e.length&&(e[a]="food"),e})),S=()=>{T(),x.value=!0,C.value=!0,z.value=setInterval(V,200)},T=()=>{d.value=[{x:5,y:5}],m.value=L(),k.value={x:1,y:0},w.value={x:1,y:0},I.value=0,E.value=!1},U=()=>{C.value&&(x.value?(clearInterval(z.value),x.value=!1):(x.value=!0,z.value=setInterval(V,200)))},V=()=>{if(!x.value)return;k.value={...w.value};const e={...d.value[0]};e.x+=k.value.x,e.y+=k.value.y,N(e)?M():(d.value.unshift(e),e.x===m.value.x&&e.y===m.value.y?(I.value+=10,m.value=L()):d.value.pop())},N=e=>e.x<0||e.x>=i.value||e.y<0||e.y>=i.value||d.value.some((a=>a.x===e.x&&a.y===e.y)),L=()=>{let e;do{e={x:Math.floor(Math.random()*i.value),y:Math.floor(Math.random()*i.value)}}while(d.value.some((a=>a.x===e.x&&a.y===e.y)));return e},$=e=>{if(!x.value)return;const a={up:{x:0,y:-1},down:{x:0,y:1},left:{x:-1,y:0},right:{x:1,y:0}}[e];a.x===-k.value.x&&a.y===-k.value.y||(w.value=a)},M=()=>{clearInterval(z.value),x.value=!1,I.value>A.value&&(A.value=I.value,E.value=!0,localStorage.setItem("snakeHighScore",A.value.toString()))},B=e=>{const a=document.activeElement;if(a&&("INPUT"===a.tagName||"TEXTAREA"===a.tagName||a.isContentEditable||a.closest(".el-input")||a.closest(".el-textarea")||a.closest("[contenteditable]")))return;const l={ArrowUp:"up",ArrowDown:"down",ArrowLeft:"left",ArrowRight:"right",w:"up",W:"up",s:"down",S:"down",a:"left",A:"left",d:"right",D:"right"};if(l[e.key]&&(e.preventDefault(),$(l[e.key]))," "===e.key){const a=document.activeElement;if(a&&("INPUT"===a.tagName||"TEXTAREA"===a.tagName||a.isContentEditable||a.closest(".el-input")||a.closest(".el-textarea")||a.closest("[contenteditable]")))return;e.preventDefault(),C.value?U():S()}};return f((()=>{document.addEventListener("keydown",B)})),b((()=>{document.removeEventListener("keydown",B),z.value&&clearInterval(z.value)})),(e,a)=>{const l=t("el-button"),d=t("el-button-group");return s(),v("div",ne,[o("div",oe,[a[4]||(a[4]=o("h4",null,"ğŸ è´ªåƒè›‡å°æ¸¸æˆ",-1)),o("div",ue,[o("span",ce,"å¾—åˆ†: "+r(I.value),1),o("span",de,"æœ€é«˜: "+r(A.value),1)])]),o("div",ve,[o("div",{class:"game-board",ref:"gameBoard",style:_({gridTemplateColumns:`repeat(${i.value}, 1fr)`,gridTemplateRows:`repeat(${i.value}, 1fr)`})},[(s(!0),v(p,null,g(D.value,((e,a)=>(s(),v("div",{key:a,class:h(["cell",{"snake-head":"head"===e,"snake-body":"body"===e,food:"food"===e,empty:"empty"===e}])},null,2)))),128))],4),x.value?y("",!0):(s(),v("div",re,[o("div",me,[C.value?(s(),v("div",ge,[a[6]||(a[6]=o("p",null,"ğŸ¯ æ¸¸æˆç»“æŸ",-1)),o("p",null,"æœ€ç»ˆå¾—åˆ†: "+r(I.value),1),E.value?(s(),v("p",ye,"ğŸ† æ–°çºªå½•ï¼")):y("",!0)])):(s(),v("div",pe,a[5]||(a[5]=[o("p",null,"ğŸ® ç‚¹å‡»å¼€å§‹æ¸¸æˆ",-1),o("p",{class:"controls"},"ä½¿ç”¨ WASD æˆ–æ–¹å‘é”®æ§åˆ¶",-1)]))),u(l,{type:"primary",size:"small",onClick:S,class:"start-btn"},{default:n((()=>[c(r(C.value?"é‡æ–°å¼€å§‹":"å¼€å§‹æ¸¸æˆ"),1)])),_:1})])]))]),o("div",fe,[o("div",be,[u(d,null,{default:n((()=>[u(l,{size:"small",onClick:a[0]||(a[0]=e=>$("up"))},{default:n((()=>a[7]||(a[7]=[c("â†‘")]))),_:1,__:[7]})])),_:1}),o("div",_e,[u(l,{size:"small",onClick:a[1]||(a[1]=e=>$("left"))},{default:n((()=>a[8]||(a[8]=[c("â†")]))),_:1,__:[8]}),u(l,{size:"small",type:x.value?"warning":"success",onClick:U},{default:n((()=>[c(r(x.value?"æš‚åœ":"ç»§ç»­"),1)])),_:1},8,["type"]),u(l,{size:"small",onClick:a[2]||(a[2]=e=>$("right"))},{default:n((()=>a[9]||(a[9]=[c("â†’")]))),_:1,__:[9]})]),u(d,null,{default:n((()=>[u(l,{size:"small",onClick:a[3]||(a[3]=e=>$("down"))},{default:n((()=>a[10]||(a[10]=[c("â†“")]))),_:1,__:[10]})])),_:1})])])])}}},[["__scopeId","data-v-8f60155b"]]),ke={class:"bongo-cat-original"},we={class:"cat-emoji"},xe=V({__name:"BongoCatOriginal",setup(a){const l=e(null),t=e(null),i=e(null),n=e(null),u=e(null),c=[],d={},m=e("ğŸ˜¸"),p=e(!1),g=e(!1),y=e(!1);let _=null;const w=Object.freeze({A:1,D:0,S:0}),x=async()=>{const e=[{name:"bongo0",url:"/bongo-cat/sounds/bongo0.wav"},{name:"bongo1",url:"/bongo-cat/sounds/bongo1.wav"},{name:"meow",url:"/bongo-cat/sounds/meow.wav"}];for(const l of e)try{const e=await fetch(l.url),a=await e.arrayBuffer();d[l.name]=await _.decodeAudioData(a)}catch(a){}},C=e=>{if(!_||!d[e])return;const a=_.createBufferSource();a.buffer=d[e],a.connect(_.destination),a.start()},I=e=>{const a=document.activeElement;if(a&&("INPUT"===a.tagName||"TEXTAREA"===a.tagName||a.isContentEditable||a.closest(".el-input")||a.closest(".el-textarea")||a.closest("[contenteditable]")))return;const l=e.key.toUpperCase();l in w&&(e.preventDefault(),E(l,!0))},A=e=>{const a=document.activeElement;if(a&&("INPUT"===a.tagName||"TEXTAREA"===a.tagName||a.isContentEditable||a.closest(".el-input")||a.closest(".el-textarea")||a.closest("[contenteditable]")))return;const l=e.key.toUpperCase();l in w&&E(l,!1)},E=(e,a)=>{const l=w[e];"S"===e?a&&!c.includes(l)&&(c.push(l),m.value="ğŸ˜»",C("meow"),setTimeout((()=>{m.value="ğŸ˜¸";const e=c.indexOf(l);e>-1&&c.splice(e,1)}),300)):a&&!c.includes(l)&&(c.push(l),0===l?g.value=!0:p.value=!0,y.value=!0,m.value="ğŸ˜¼",C(`bongo${l}`),setTimeout((()=>{p.value=!1,g.value=!1,y.value=!1,m.value="ğŸ˜¸";const e=c.indexOf(l);e>-1&&c.splice(e,1)}),150))};return f((()=>{(async()=>{try{_=new(window.AudioContext||window.webkitAudioContext),await x()}catch(e){}})(),document.addEventListener("keydown",I),document.addEventListener("keyup",A)})),b((()=>{document.removeEventListener("keydown",I),document.removeEventListener("keyup",A)})),(e,a)=>(s(),v("div",ke,[a[0]||(a[0]=k('<div class="game-header" data-v-37d3654c><h4 data-v-37d3654c>ğŸ¥ Bongo Cat</h4><div class="controls-hint" data-v-37d3654c><span class="key" data-v-37d3654c>A</span><span class="key" data-v-37d3654c>D</span><span class="key wide" data-v-37d3654c>S</span></div></div>',1)),o("div",{class:"bongo-container",ref_key:"bongoContainer",ref:l},[o("div",we,[o("div",{class:"cat-head",ref_key:"catHead",ref:t},r(m.value),513),o("div",{class:h(["paw-left",{active:p.value}]),ref_key:"pawLeft",ref:i}," ğŸ¾ ",2),o("div",{class:h(["paw-right",{active:g.value}]),ref_key:"pawRight",ref:n}," ğŸ¾ ",2)]),o("div",{class:h(["bongo-drums",{hit:y.value}]),ref_key:"bongo",ref:u}," ğŸ¥ ",2)],512)]))}},[["__scopeId","data-v-37d3654c"]]),Ce={class:"competition-page"},Ie={key:0,class:"current-competition"},Ae={class:"card-header"},Ee={class:"competition-title"},ze={class:"time-info"},De={class:"competition-content"},Se={class:"competition-desc"},Te={class:"time-section"},Ue={class:"time-item"},Ve={class:"time-item"},Ne={key:0,class:"time-item"},Le={class:"countdown"},$e={class:"stats-section"},Me={class:"stat-item count-stat desktop-only"},Be={class:"stat-visual"},Re={class:"number"},je={class:"stat-item count-stat mobile-only"},Pe={class:"stat-visual"},Oe={class:"number"},He={class:"stat-item game-stat desktop-game-only"},Xe={class:"stat-visual game-container"},qe={class:"stat-item game-stat desktop-game-only"},Ge={class:"stat-visual game-container"},We={class:"action-section"},Fe={class:"button-text"},Ke={key:0,class:"submissions-section"},Je={class:"submissions-grid"},Qe=["onClick"],Ye={class:"card-content"},Ze={class:"category"},ea={class:"author"},aa={class:"content"},la={key:0,class:"ai-review"},ta={class:"ai-review-preview"},sa={class:"history-section"},ia={key:0,class:"loading-section"},na={key:1,class:"empty-section"},oa={key:2,class:"history-list"},ua={class:"history-grid"},ca=["onClick"],da={class:"history-card-modern"},va={class:"card-header"},ra={class:"competition-title"},ma={class:"card-content"},pa={class:"competition-description"},ga={class:"card-meta"},ya={class:"meta-item"},fa={class:"meta-item"},ba={class:"card-actions"},_a={key:0,class:"pagination-section"},ha=V({__name:"Competition",setup(l){const d=N(),k=e(null),I=e([]),V=e([]),L=e([]),$=e(!1),B=e(!1),j=e(!1),P=e(!1),O=e(null),H=e(null),X=e(0),q=e(null),G=e(!1),W=e(!1),F=e({page:1,per_page:10,total:0,pages:0}),K=a((()=>!(!k.value||!d.isLoggedIn)&&L.value.some((e=>e.competition_id===k.value.id)))),J=a((()=>{if(!(k.value&&k.value.is_active&&k.value.start_time&&k.value.end_time))return 0;const e=new Date(k.value.start_time).getTime(),a=new Date(k.value.end_time).getTime(),l=(new Date).getTime();if(l<e)return 0;if(l>a)return 100;const t=a-e;if(t<=0)return 100;const s=l-e;return Math.round(s/t*100)}));a((()=>J.value)),a((()=>{const e=J.value;return e<50?"#67c23a":e<80?"#e6a23c":"#f56c6c"})),a((()=>"#409eff")),f((()=>{Q(),Z(),d.isLoggedIn&&Y(),ne()})),b((()=>{q.value&&clearInterval(q.value)}));const Q=async()=>{try{const e=await U.get("/api/competition/current");k.value=e.data.competition,k.value.submissions&&(I.value=k.value.submissions),se()}catch(e){}},Y=async()=>{try{const e=await U.get("/api/competition/my-submissions");L.value=e.data.submissions}catch(e){}},Z=async(e=1)=>{G.value=!0;try{const a=await U.get("/api/competition/history",{params:{page:e,per_page:F.value.per_page}});V.value=a.data.competitions,F.value={page:a.data.page,per_page:a.data.per_page,total:a.data.total,pages:a.data.pages}}catch(a){A.error("åŠ è½½å†å²æ¯”èµ›å¤±è´¥")}finally{G.value=!1}},ee=()=>{$.value=!$.value,$.value&&0===I.value.length&&Q()},ae=async e=>{try{await U.post("/api/competition/submit",e),A.success("ä½œå“æäº¤æˆåŠŸï¼Œç­‰å¾…ç®¡ç†å‘˜å®¡æ ¸"),B.value=!1,Y()}catch(a){const e=a.response?.data?.msg||"æäº¤å¤±è´¥";A.error(e)}},le=()=>{k.value?.is_active?K.value?A.info("æ‚¨å·²ç»æäº¤è¿‡ä½œå“äº†ï¼Œæ¯ä¸ªæ¯”èµ›å‘¨æœŸåªèƒ½æäº¤ä¸€ä¸ªä½œå“"):B.value=!0:A.warning("æ¯”èµ›å·²ç»“æŸï¼Œæ— æ³•æäº¤ä½œå“")},te=async()=>{W.value=!0;try{await Q(),A.success("ä½œå“åˆ—è¡¨å·²åˆ·æ–°")}catch(e){A.error("åˆ·æ–°å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•")}finally{W.value=!1}},se=()=>{k.value&&k.value.is_active&&(X.value=k.value.time_remaining)},ne=()=>{q.value=setInterval((()=>{X.value>0?X.value-=1:k.value&&k.value.is_active&&Q()}),1e3)},oe=e=>e?new Date(e).toLocaleString("zh-CN"):"",ue=e=>{const a=Math.floor(e/86400),l=Math.floor(e%86400/3600),t=Math.floor(e%3600/60),s=e%60;return a>0?`${a}å¤© ${l}å°æ—¶ ${t}åˆ†é’Ÿ`:l>0?`${l}å°æ—¶ ${t}åˆ†é’Ÿ`:t>0?`${t}åˆ†é’Ÿ ${s}ç§’`:`${s}ç§’`},ce=(e,a)=>e?e.length<=a?e:e.substring(0,a)+"...":"";return(e,a)=>{const l=t("el-tag"),d=t("el-icon"),f=t("el-button"),b=t("el-card"),A=t("el-empty"),U=t("el-pagination");return s(),v("div",Ce,[a[21]||(a[21]=o("div",{class:"page-header"},[o("h1",null,"ğŸ† å“¦å“¦å“¦ï¼Œè¿™ä¸æ¥ç©ç©ï¼Ÿ"),o("p",null,"å±•ç¤ºæ‚¨æœ€å…·åˆ›æ„çš„æç¤ºè¯ï¼Œè·å¾—AIè¯„è¯­åé¦ˆï¼")],-1)),k.value?(s(),v("div",Ie,[u(b,{class:"competition-card"},{header:n((()=>[o("div",Ae,[o("span",Ee,r(k.value.title),1),o("div",ze,[k.value.is_active?(s(),i(l,{key:0,type:"success",effect:"dark"},{default:n((()=>a[4]||(a[4]=[c(" è¿›è¡Œä¸­ ")]))),_:1,__:[4]})):(s(),i(l,{key:1,type:"info",effect:"dark"},{default:n((()=>a[5]||(a[5]=[c(" å·²ç»“æŸ ")]))),_:1,__:[5]}))])])])),default:n((()=>[o("div",De,[o("p",Se,r(k.value.description),1),o("div",Te,[o("div",Ue,[a[6]||(a[6]=o("span",{class:"label"},"å¼€å§‹æ—¶é—´ï¼š",-1)),o("span",null,r(oe(k.value.start_time)),1)]),o("div",Ve,[a[7]||(a[7]=o("span",{class:"label"},"ç»“æŸæ—¶é—´ï¼š",-1)),o("span",null,r(oe(k.value.end_time)),1)]),k.value.is_active?(s(),v("div",Ne,[a[8]||(a[8]=o("span",{class:"label"},"å‰©ä½™æ—¶é—´ï¼š",-1)),o("span",Le,r(ue(X.value)),1)])):y("",!0)]),o("div",$e,[o("div",Me,[o("div",Be,[o("span",Re,r(k.value.submissions_count||0),1)]),a[9]||(a[9]=o("div",{class:"stat-label"},"å‚èµ›ä½œå“",-1))]),o("div",je,[o("div",Pe,[o("span",Oe,r(k.value.submissions_count||0),1)]),a[10]||(a[10]=o("div",{class:"stat-label"},"å‚èµ›ä½œå“",-1))]),o("div",He,[o("div",Xe,[u(he,{class:"snake-game-embedded"})]),a[11]||(a[11]=o("div",{class:"stat-label"},"è´ªåƒè›‡",-1))]),o("div",qe,[o("div",Ge,[u(xe,{class:"bongo-cat-embedded"})]),a[12]||(a[12]=o("div",{class:"stat-label"},"Bongo Cat",-1))])]),o("div",We,[u(w,{name:"button-bounce",appear:""},{default:n((()=>[u(f,{type:"primary",size:"large",class:"animated-button primary-button",disabled:!k.value.is_active&&!K.value,onClick:le},{default:n((()=>[u(d,{class:"button-icon"},{default:n((()=>[u(m(E))])),_:1}),c(" "+r(K.value?"å·²æäº¤ä½œå“":"æäº¤ä½œå“"),1)])),_:1},8,["disabled"])])),_:1}),u(w,{name:"button-slide-fade",mode:"out-in",appear:""},{default:n((()=>[$.value?(s(),i(f,{key:"refresh-submissions",size:"large",class:h(["animated-button refresh-button",{"loading-state":W.value}]),disabled:W.value,onClick:te},{default:n((()=>[u(d,{class:h(["button-icon",{rotating:W.value}])},{default:n((()=>[u(m(D))])),_:1},8,["class"]),o("span",Fe,r(W.value?"åˆ·æ–°ä¸­":"åˆ·æ–°ä½œå“"),1)])),_:1},8,["class","disabled"])):(s(),i(f,{key:"view-submissions",size:"large",class:"animated-button secondary-button",onClick:ee},{default:n((()=>[u(d,{class:"button-icon"},{default:n((()=>[u(m(z))])),_:1}),a[13]||(a[13]=c(" æŸ¥çœ‹ä½œå“ "))])),_:1,__:[13]}))])),_:1})])])])),_:1})])):y("",!0),u(w,{name:"fade-slide",appear:""},{default:n((()=>[$.value?(s(),v("div",Ke,[a[16]||(a[16]=o("h2",null,"å‚èµ›ä½œå“",-1)),o("div",Je,[u(x,{name:"card-appear",tag:"div",class:"submissions-grid-container",appear:""},{default:n((()=>[(s(!0),v(p,null,g(I.value,((e,l)=>(s(),v("div",{key:e.id,class:"submission-card",style:_({"--delay":.1*l+"s"}),onClick:a=>(e=>{O.value=e,j.value=!0})(e)},[o("div",Ye,[o("h3",null,r(e.title),1),o("p",Ze,r(e.category),1),o("p",ea,"ä½œè€…ï¼š"+r(e.author),1),o("p",aa,r(ce(e.content,100)),1)]),e.ai_review?(s(),v("div",la,[a[14]||(a[14]=o("h4",null,"AIè¯„è¯­ï¼š",-1)),o("p",ta,r(ce(e.ai_review,80)),1),a[15]||(a[15]=o("span",{class:"view-detail-hint"},"ç‚¹å‡»æŸ¥çœ‹å®Œæ•´è¯„è¯­...",-1))])):y("",!0)],12,Qe)))),128))])),_:1})])])):y("",!0)])),_:1}),o("div",sa,[a[20]||(a[20]=o("h2",null,"å†å²æ¯”èµ›",-1)),G.value?(s(),v("div",ia,[u(d,{class:"is-loading"},{default:n((()=>[u(m(C))])),_:1}),a[17]||(a[17]=o("span",null,"åŠ è½½å†å²æ¯”èµ›ä¸­...",-1))])):0===V.value.length?(s(),v("div",na,[u(A,{description:"æš‚æ— å†å²æ¯”èµ›"})])):(s(),v("div",oa,[o("div",ua,[(s(!0),v(p,null,g(V.value,(e=>(s(),v("div",{key:e.id,class:"history-card-wrapper",onClick:a=>(async e=>{H.value=e,P.value=!0})(e.id)},[o("div",da,[o("div",va,[o("h3",ra,r(e.title),1),u(l,{type:"info",effect:"dark",size:"small"},{default:n((()=>a[18]||(a[18]=[c(" å·²ç»“æŸ ")]))),_:1,__:[18]})]),o("div",ma,[o("p",pa,r(e.description),1),o("div",ga,[o("div",ya,[u(d,null,{default:n((()=>[u(m(S))])),_:1}),o("span",null,r(oe(e.start_time))+" - "+r(oe(e.end_time)),1)]),o("div",fa,[u(d,null,{default:n((()=>[u(m(T))])),_:1}),o("span",null,r(e.submissions_count)+" ä¸ªä½œå“",1)])])]),o("div",ba,[u(f,{type:"primary",class:"detail-btn"},{default:n((()=>[u(d,null,{default:n((()=>[u(m(z))])),_:1}),a[19]||(a[19]=c(" æŸ¥çœ‹è¯¦æƒ… "))])),_:1,__:[19]})])])],8,ca)))),128))]),F.value.pages>1?(s(),v("div",_a,[u(U,{"current-page":F.value.page,"onUpdate:currentPage":a[0]||(a[0]=e=>F.value.page=e),"page-size":F.value.per_page,total:F.value.total,layout:"prev, pager, next",onCurrentChange:Z},null,8,["current-page","page-size","total"])])):y("",!0)]))]),u(R,{visible:B.value,"onUpdate:visible":a[1]||(a[1]=e=>B.value=e),onSubmit:ae},null,8,["visible"]),u(M,{visible:j.value,"onUpdate:visible":a[2]||(a[2]=e=>j.value=e),submission:O.value},null,8,["visible","submission"]),u(ie,{visible:P.value,"onUpdate:visible":a[3]||(a[3]=e=>P.value=e),"competition-id":H.value},null,8,["visible","competition-id"])])}}},[["__scopeId","data-v-ec43f39e"]]);export{ha as default};
