import{az as e,r as a,c as r,k as s,S as l,X as o,ag as t,y as i,z as d,A as n,P as u,H as m,L as p}from"./vue-vendor-d5869c7e.js";import{_ as w,u as g}from"./index-294d5dea.js";import{E as c}from"./element-plus-34fa3ae3.js";import"./utils-9074b6ef.js";const f={class:"register-container"},v={class:"register-form-wrapper"},b={style:{width:"100%","text-align":"center"}},_={class:"login-link"},h=w({__name:"Register",setup(w){const h=e(),y=g(),V=a(null),x=a(!1),P=a(window.innerWidth),k=r((()=>P.value<=768)),j=()=>{P.value=window.innerWidth};s((()=>{window.addEventListener("resize",j)})),l((()=>{window.removeEventListener("resize",j)}));const z=o({username:"",password:"",confirmPassword:""}),E={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:20,message:"长度在 3 到 20 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:30,message:"长度在 6 到 30 个字符",trigger:"blur"}],confirmPassword:[{required:!0,message:"请再次输入密码",trigger:"blur"},{validator:(e,a,r)=>{a!==z.password?r(new Error("两次输入的密码不一致")):r()},trigger:"blur"}]},q=async()=>{V.value&&await V.value.validate((async e=>{if(e){x.value=!0;try{await y.register({username:z.username,password:z.password}),c.success("注册成功，请登录"),h.push("/login")}catch(a){c.error(a.message||"注册失败，请稍后再试")}finally{x.value=!1}}}))};return(e,a)=>{const r=t("el-input"),s=t("el-form-item"),l=t("el-button"),o=t("el-form"),w=t("router-link");return i(),d("div",f,[n("div",v,[a[6]||(a[6]=n("h2",null,"注册账号",-1)),u(o,{model:z,rules:E,ref_key:"registerFormRef",ref:V,"label-width":k.value?"0px":"100px","label-position":k.value?"top":"left"},{default:m((()=>[u(s,{label:"用户名",prop:"username"},{default:m((()=>[u(r,{modelValue:z.username,"onUpdate:modelValue":a[0]||(a[0]=e=>z.username=e),placeholder:"请输入用户名"},null,8,["modelValue"])])),_:1}),u(s,{label:"密码",prop:"password"},{default:m((()=>[u(r,{modelValue:z.password,"onUpdate:modelValue":a[1]||(a[1]=e=>z.password=e),type:"password",placeholder:"请输入密码"},null,8,["modelValue"])])),_:1}),u(s,{label:"确认密码",prop:"confirmPassword"},{default:m((()=>[u(r,{modelValue:z.confirmPassword,"onUpdate:modelValue":a[2]||(a[2]=e=>z.confirmPassword=e),type:"password",placeholder:"请再次输入密码"},null,8,["modelValue"])])),_:1}),u(s,null,{default:m((()=>[n("div",b,[u(l,{type:"primary",onClick:q,loading:x.value,class:"submit-btn",style:{width:"240px"}},{default:m((()=>a[3]||(a[3]=[p(" 注册 ")]))),_:1,__:[3]},8,["loading"])])])),_:1})])),_:1},8,["model","label-width","label-position"]),n("div",_,[a[5]||(a[5]=p(" 已有账号？")),u(w,{to:"/login"},{default:m((()=>a[4]||(a[4]=[p("去登录")]))),_:1,__:[4]})])])])}}},[["__scopeId","data-v-4eb5eba1"]]);export{h as default};
